<style>
    * {
        scroll-behavior: smooth;
    }
</style>
<div class="contsArea" onclick="location.href='#contsTitle'">
    <dl class="animate__animated animate__fadeInUp">
        <p class="icon animate__animated animate__flip animate__delay-1s">
            <i class="fa-regular fa-hand-pointer"></i></p>
        <div>
            <dt>쉽고 빠른 견적비교</dt>
            <dd><strong class="txtRed">클릭 한번으로 편리하게</strong>비교견적 확인하세요!</dd>
        </div>
    </dl>
    <dl class="animate__animated animate__fadeInUp">
        <p class="icon animate__animated animate__flip animate__delay-2s">
            <i class="fa-regular fa-money-from-bracket"></i></p>
        <div>
            <dt>의약품 저가구매</dt>
            <dd>에스티메디에서 의약품을<strong class="txtRed">저렴하게 구매해보세요!</strong></dd>
        </div>
    </dl>
    <dl class="animate__animated animate__fadeInUp">
        <p class="icon animate__animated animate__flip animate__delay-3s">
            <i class="fa-regular fa-bell-concierge"></i></p>
        <div>
            <dt>확실한 서비스</dt>
            <dd><strong class="txtRed">간편하고 저렴한 서비스</strong>에스티메디를 이용해보세요!</dd>
        </div>
    </dl>
</div>
<div class="contsTitle animate__animated animate__fadeInUp animate__delay-1s" id="contsTitle">
    <h2>날이 갈수록 부담되는 약제비</h2>
    <h1>비교견적으로 한번에!</h1>
    <h3><i class="fa-duotone fa-angles-down"></i></h3>
</div>

<!-- Swiper -->
<ul class="swiper examSwiper">
    <ul class="nav nav-tabs swiper-pagination"></ul>
    <div class="swiper-wrapper">
        <div class="swiper-slide">
            <div class="tab-pane active" id="v1">

                <div class="contsTable table">
                    <div class="scroll_comm">↔ 좌우로 스크롤 하세요 ↔</div>
                    <table class="animate__animated animate__fadeIn  animate__delay-1s">
                        <colgroup>
                            <col width="55%">
                            <col width="15%">
                            <col width="15%">
                            <col width="15%">
                        </colgroup>
                        <thead>
                        <tr>
                            <th>품명</th>
                            <th>기존단가</th>
                            <th>타사단가</th>
                            <th class="bg2"><i class="fa-solid fa-badge-check"></i> ST단가</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>아로세트정 5mg</td>
                            <td>669</td>
                            <td>330</td>
                            <td>280</td>
                        </tr>
                        <tr>
                            <td>아로세트정 10mg</td>
                            <td>991</td>
                            <td>440</td>
                            <td>380</td>
                        </tr>
                        <tr>
                            <td>뉴로스캡슐 100mg</td>
                            <td>198</td>
                            <td>100</td>
                            <td>90</td>
                        </tr>
                        <tr>
                            <td>이노시캄캡슐 7.5mg</td>
                            <td>266</td>
                            <td>145</td>
                            <td>131</td>
                        </tr>
                        <tr>
                            <td>동광세프트리악손주 1g</td>
                            <td>5,923</td>
                            <td>3,410</td>
                            <td>3,069</td>
                        </tr>
                        <tr>
                            <td>울트라맥세미정</td>
                            <td>125</td>
                            <td>75</td>
                            <td>70</td>
                        </tr>
                        <tr>
                            <td>카바피나캡슐 300mg</td>
                            <td>292</td>
                            <td>180</td>
                            <td>170</td>
                        </tr>
                        <tr>
                            <td>우리들아세틸시스테인캡슐 200mg</td>
                            <td>81</td>
                            <td>52</td>
                            <td>40</td>
                        </tr>
                        <tr>
                            <td>프라탐서방정 0.2mg</td>
                            <td>440</td>
                            <td>350</td>
                            <td>315</td>
                        </tr>
                        </tbody>
                    </table>

                </div>

                <!--숫자증감애니메이션-->
                <div class="counterareabg">
                    <div>
                        <span class="title txt_gray">기존 합계</span>
                        <span class="title txt_gray2">타사 합계</span>
                        <span class="title txt_blue">ST 합계 <span>49.44% 절감</span></span>
                    </div>
                    <div>
                        <span class="counter txt_gray" data-start="0" data-end="11835068"><br/>0</span>
                        <span class="counter txt_gray2" data-start="0" data-end="6803775">0</span>
                        <span class="counter txt_blue" data-start="0" data-end="5983404">0</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-slide">

            <div class="tab-pane" id="v2">

                <div class="contsTable table">

                    <div class="scroll_comm">↔ 좌우로 스크롤 하세요 ↔</div>
                    <table class="animate__animated animate__fadeIn">
                        <colgroup>
                            <col width="55%">
                            <col width="15%">
                            <col width="15%">
                            <col width="15%">
                        </colgroup>
                        <thead>
                        <tr>
                            <th>품명</th>
                            <th>기존단가</th>
                            <th>타사단가</th>
                            <th class="bg2"><i class="fa-solid fa-badge-check"></i> ST단가</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>하이페질정 5mg</td>
                            <td>646</td>
                            <td>330</td>
                            <td>280</td>
                        </tr>
                        <tr>
                            <td>하이페질정 10mg</td>
                            <td>943</td>
                            <td>440</td>
                            <td>380</td>
                        </tr>
                        <tr>
                            <td>세프리트리악손나트륨주 1g</td>
                            <td>7,937</td>
                            <td>3,410</td>
                            <td>3,069</td>
                        </tr>
                        <tr>
                            <td>아트놀셋정</td>
                            <td>190</td>
                            <td>100</td>
                            <td>90</td>
                        </tr>
                        <tr>
                            <td>클로델정 75mg</td>
                            <td>892</td>
                            <td>450</td>
                            <td>430</td>
                        </tr>
                        <tr>
                            <td>콜리날연질캡슐 400mg</td>
                            <td>445</td>
                            <td>380</td>
                            <td>350</td>
                        </tr>
                        <tr>
                            <td>아이빅사정 10mg</td>
                            <td>334</td>
                            <td>360</td>
                            <td>324</td>
                        </tr>
                        <tr>
                            <td>쿠에티아핀정 25mg</td>
                            <td>321</td>
                            <td>150</td>
                            <td>120</td>
                        </tr>
                        <tr>
                            <td>타박탐주 4.5mg</td>
                            <td>7,044</td>
                            <td>5,300</td>
                            <td>5,100</td>
                        </tr>
                        </tbody>
                    </table>

                </div>

                <!--숫자증감애니메이션-->
                <div class="counterareabg">
                    <div>
                        <span class="title txt_gray">기존 합계</span>
                        <span class="title txt_gray2">타사 합계</span>
                        <span class="title txt_blue">ST 합계 <span>54.92% 절감</span></span>
                    </div>
                    <div>
                        <span class="counter txt_gray" data-start="0" data-end="16793440"><br/>0</span>
                        <span class="counter txt_gray2" data-start="0" data-end="9197000">0</span>
                        <span class="counter txt_blue" data-start="0" data-end="8127400">0</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-slide">

            <div class="tab-pane" id="v3">

                <div class="contsTable table">

                    <div class="scroll_comm">↔ 좌우로 스크롤 하세요 ↔</div>
                    <table class="animate__animated animate__fadeIn">
                        <colgroup>
                            <col width="55%">
                            <col width="15%">
                            <col width="15%">
                            <col width="15%">
                        </colgroup>
                        <thead>
                        <tr>
                            <th>품명</th>
                            <th>기존단가</th>
                            <th>타사단가</th>
                            <th class="bg2"><i class="fa-solid fa-badge-check"></i> ST단가</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>세프트리악손주 1g</td>
                            <td>5,923</td>
                            <td>3,410</td>
                            <td>3,069</td>
                        </tr>
                        <tr>
                            <td>타박탐주 4.5g</td>
                            <td>7,044</td>
                            <td>5,300</td>
                            <td>5,100</td>
                        </tr>
                        <tr>
                            <td>큐로빅스정 75mg</td>
                            <td>827</td>
                            <td>450</td>
                            <td>430</td>
                        </tr>
                        <tr>
                            <td>메펨주 1g</td>
                            <td>13,761</td>
                            <td>9,800</td>
                            <td>9,300</td>
                        </tr>
                        <tr>
                            <td>도넬정 10mg</td>
                            <td>700</td>
                            <td>440</td>
                            <td>380</td>
                        </tr>
                        <tr>
                            <td>도넬정 5mg</td>
                            <td>500</td>
                            <td>330</td>
                            <td>280</td>
                        </tr>
                        <tr>
                            <td>뉴로케이정 10mg</td>
                            <td>545</td>
                            <td>360</td>
                            <td>324</td>
                        </tr>
                        <tr>
                            <td>시틸로정 10mg</td>
                            <td>426</td>
                            <td>300</td>
                            <td>290</td>
                        </tr>
                        <tr>
                            <td>쿠티아핀정 100mg</td>
                            <td>560</td>
                            <td>330</td>
                            <td>310</td>
                        </tr>
                        <tr>
                            <td>쿠티아핀정 25mg</td>
                            <td>201</td>
                            <td>150</td>
                            <td>120</td>
                        </tr>
                        <tr>
                            <td>암로바정</td>
                            <td>312</td>
                            <td>332</td>
                            <td>229</td>
                        </tr>
                        <tr>
                            <td>노통펜프러스정</td>
                            <td>162</td>
                            <td>100</td>
                            <td>90</td>
                        </tr>
                        </tbody>
                    </table>

                </div>

                <!--숫자증감애니메이션-->
                <div class="counterareabg">
                    <div>
                        <span class="title txt_gray">기존 합계</span>
                        <span class="title txt_gray2">타사 합계</span>
                        <span class="title txt_blue">ST 합계 <span>38.8% 절감</span></span>
                    </div>
                    <div>
                        <span class="counter txt_gray" data-start="0" data-end="26479760"><br/>0</span>
                        <span class="counter txt_gray2" data-start="0" data-end="17783700">0</span>
                        <span class="counter txt_blue" data-start="0" data-end="16204570">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <div class="contsBtn">
        <button class="btn btn_large btn_ani" onclick="location.href='/signUp'">
            <div class="tooltip">직접 비교해보세요!</div>
            비교견적 확인하기 <i class="fa-thin fa-arrow-pointer"></i></button>
    </div>

    <script>
        $(document).ready(function () {
            // 클래스가 "counter"인 모든 요소를 선택합니다.
            const $counters = $(".counter");

            // 노출 비율(%)과 애니메이션 속도(ms)을 설정합니다.
            const exposurePercentage = 100; // ex) 스크롤 했을 때 $counters 컨텐츠가 화면에 100% 노출되면 숫자가 올라갑니다.
            const duration = 1000; // ex) 1000 = 1초

            // 숫자에 쉼표를 추가할지 여부를 설정합니다.
            const addCommas = true; // ex) true = 1,000 / false = 1000

            // 숫자를 업데이트하고 애니메이션하는 함수 정의
            function updateCounter($el, start, end) {
                let startTime;

                function animateCounter(timestamp) {
                    if (!startTime) startTime = timestamp;
                    const progress = (timestamp - startTime) / duration;
                    const current = Math.round(start + progress * (end - start));
                    const formattedNumber = addCommas ? current.toLocaleString() : current;
                    $el.text(formattedNumber);

                    if (progress < 1) {
                        requestAnimationFrame(animateCounter);
                    } else {
                        $el.text(addCommas ? end.toLocaleString() : end);
                    }
                }

                requestAnimationFrame(animateCounter);
            }

            // 초기화 함수 정의
            function initCounters() {
                $counters.each(function () {
                    const $el = $(this);
                    const start = parseInt($el.data("start"));
                    const end = parseInt($el.data("end"));
                    // 숫자를 업데이트하고 애니메이션을 시작합니다.
                    updateCounter($el, start, end);
                });
            }

            // 초기화 함수 호출
            initCounters();

            // 윈도우의 사이즈가 변경될 때마다 실행됩니다.
            $(window).on('resize', function () {
                if ($(window).width() > 1200) {
                    $(window).on('scroll', function () {
                        // 각 "counter" 요소에 대해 반복합니다.
                        $counters.each(function () {
                            const $el = $(this);
                            // 요소가 아직 스크롤되지 않았다면 처리합니다.
                            if (!$el.data('scrolled')) {
                                // 요소의 위치 정보를 가져옵니다.
                                const rect = $el[0].getBoundingClientRect();
                                const winHeight = window.innerHeight;
                                const contentHeight = rect.bottom - rect.top;

                                // 요소가 화면에 특정 비율만큼 노출될 때 처리합니다.
                                if (rect.top <= winHeight - (contentHeight * exposurePercentage / 100) && rect.bottom >= (contentHeight * exposurePercentage / 100)) {
                                    const start = parseInt($el.data("start"));
                                    const end = parseInt($el.data("end"));
                                    // 숫자를 업데이트하고 애니메이션을 시작합니다.
                                    updateCounter($el, start, end);
                                    $el.data('scrolled', true);
                                }
                            }
                        });
                    }).scroll(); // 초기화
                } else {
                    // 윈도우 사이즈가 1200px 이하일 때 스크롤 이벤트 제거
                    $(window).off('scroll');
                    // 초기화 함수 호출
                    initCounters();
                }
            }).resize(); // 초기화
        });
    </script>
</ul>